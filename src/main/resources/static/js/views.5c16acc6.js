(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views"],{"005e":function(e,t,o){},"1e4b":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[e._m(0),o("div",{staticClass:"main"},[o("div",{staticClass:"leftmenu"},[o("div",{staticClass:"addBox"},[o("i",{staticClass:"el-icon-plus",on:{click:function(t){e.dialog1=!0}}}),o("el-input",{staticStyle:{width:"65%",color:"white"},attrs:{placeholder:"请输入内容",size:"mini",clearable:""},model:{value:e.MenusreachText,callback:function(t){e.MenusreachText=t},expression:"MenusreachText"}},[o("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),o("el-button",{staticStyle:{padding:"6px 7px"},attrs:{type:"info",size:"mini",plain:""},on:{click:e.selectByName}},[e._v("查 询")]),o("el-dialog",{attrs:{title:"新建连接",visible:e.dialog1,width:"30%","before-close":e.handleClose,"show-close":!1},on:{"update:visible":function(t){e.dialog1=t}}},[o("div",{staticClass:"addList"},[o("el-form",{ref:"joinForm",attrs:{model:e.joinForm,"label-width":"160px",rules:e.rules}},[o("el-form-item",{attrs:{label:"kafka连接名",prop:"kafkaName"}},[o("el-input",{staticStyle:{width:"85%"},model:{value:e.joinForm.kafkaName,callback:function(t){e.$set(e.joinForm,"kafkaName",t)},expression:"joinForm.kafkaName"}})],1),o("el-form-item",{attrs:{label:"kafka版本",prop:"kafkaVersion"}},[o("el-input",{staticStyle:{width:"85%"},model:{value:e.joinForm.kafkaVersion,callback:function(t){e.$set(e.joinForm,"kafkaVersion",t)},expression:"joinForm.kafkaVersion"}})],1),o("el-form-item",{attrs:{label:"Kafka ip+port",prop:"kafkaBootstrap"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"例：192.168.1.1：28807，192.168.1.2：28807"},model:{value:e.joinForm.kafkaBootstrap,callback:function(t){e.$set(e.joinForm,"kafkaBootstrap",t)},expression:"joinForm.kafkaBootstrap"}})],1),o("el-form-item",{attrs:{label:"Zookeeper ip+port",prop:"zookeeperBootStrap"}},[o("el-input",{staticStyle:{width:"85%"},model:{value:e.joinForm.zookeeperBootStrap,callback:function(t){e.$set(e.joinForm,"zookeeperBootStrap",t)},expression:"joinForm.zookeeperBootStrap"}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:e.testSelectCon}},[e._v("测试连接")]),o("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.submitForm("joinForm")}}},[e._v("添 加")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.resetForm("joinForm")}}},[e._v("取 消")])],1)])],1),o("el-col",[o("el-tree",{ref:"contree",staticStyle:{background:"transparent",color:"white","margin-top":"10px"},attrs:{data:e.Treedata,props:e.defaultProps,"node-key":"id","highlight-current":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,n=t.data;return o("div",{staticClass:"custom-tree-node",staticStyle:{width:"100%",display:"flex"}},[o("span",{staticClass:"sp-Text",attrs:{title:n.kafkaBootstrap}},[e._v(e._s(a.label)),1==a.level?o("span",{staticStyle:{"user-select":"none"}},[e._v("("+e._s(n.kafkaBootstrap)+")")]):e._e()]),o("span",{directives:[{name:"show",rawName:"v-show",value:1==a.level,expression:"node.level == 1"}],staticStyle:{float:"right","margin-left":"30px"}},[o("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.removeConnect(n)}}})])])}}])})],1)],1),o("div",{staticClass:"rightBox"},["生产者"==e.selectTab?o("product",{attrs:{type:e.$route.query.deviceType,parent:e.selectID}}):e._e(),"消费者"==e.selectTab?o("consumer",{attrs:{type:e.$route.query.deviceType,parent:e.selectID}}):e._e(),"topic"==e.selectTab?o("topic",{attrs:{type:e.$route.query.deviceType,parent:e.selectID}}):e._e()],1)])])},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"topBox"},[o("div",{staticClass:"logoBox"},[e._v("KafkaTool")])])}],r=o("d88b"),s=o("b4b6"),i=o("e24a"),c=o("e4bc"),l={data:function(){return{MenusreachText:"",dialog1:!1,selectID:"",testFlag:!1,dataType:"/^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9]):d{0,5}$/",joinForm:{kafkaName:"",kafkaBootstrap:"",kafkaVersion:"",zookeeperBootStrap:""},rules:{kafkaName:[{required:!0,message:"请输入连接名",trigger:"blur"}],kafkaBootstrap:[{required:!0,message:"请输入连接地址",trigger:"blur"}]},selectTab:"",Treedata:[],defaultProps:{children:"children",label:"label"},nodeCount:0,preNodeId:null,curNodeId:null,nodeTimer:null}},components:{product:r["default"],consumer:s["default"],topic:i["default"]},watch:{dialog1:function(e){e||this.resetForm("joinForm")},MenusreachText:function(e){""==e&&this.selectJoinList()}},created:function(){this.selectJoinList()},methods:{loadNode1:function(e,t){return 0===e.level?t([{name:"region"}]):e.level>1?t([]):void setTimeout(function(){var e=[{name:"leaf",leaf:!0},{name:"zone"}];t(e)},500)},selectJoinList:function(){var e=this;this.Treedata=[],Object(c["k"])().then(function(t){if(200==t.status)for(var o=t.data.data,a=0;a<o.length;a++){var n={id:o[a].id,label:o[a].kafkaName,kafkaBootstrap:o[a].kafkaBootstrap,children:[]};e.Treedata.push(n)}})},handleNodeClick:function(e){var t=this;if(e.hasOwnProperty("children")){if(this.nodeCount++,this.preNodeId&&this.nodeCount>=2&&(this.curNodeId=e.id,this.nodeCount=0,this.curNodeId==this.preNodeId)){var o={kafkaName:encodeURIComponent(e.label),kafkaBootstrap:e.kafkaBootstrap,kafkaVersion:"",zookeeperBootStrap:""};return Object(c["v"])(o).then(function(o){if(200==o.data.code){t.$message({showClose:!0,message:"连接成功!\r\n"+o.data.message,type:"success"});for(var a=[{label:"生产者",fid:e.id},{label:"消费者",fid:e.id},{label:"topic",fid:e.id}],n=0;n<t.Treedata.length;n++)t.Treedata[n].id==e.id&&(t.Treedata[n].children=a,t.Treedata=JSON.parse(JSON.stringify(t.Treedata)),t.$set(t.Treedata,"show",!0));console.log(t.Treedata)}else 500==o.data.code&&t.$message({showClose:!0,message:"连接失败",type:"error"})}),this.curNodeId=null,void(this.preNodeId=null)}this.preNodeId=e.id,this.nodeTimer=setTimeout(function(){t.preNodeId=null,t.nodeCount=0},300)}else this.selectTab=e.label,this.selectID=e.fid},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;Object(c["b"])(t.joinForm).then(function(e){200==e.data.code?(t.resetForm("joinForm"),t.$message({showClose:!0,message:"添加成功",type:"success"}),t.selectJoinList()):t.$message({showClose:!0,message:e.data.message,type:"error"})})})},resetForm:function(e){this.dialog1=!1,this.$refs[e].resetFields()},testSelectCon:function(){var e=this,t={kafkaName:encodeURIComponent(this.joinForm.kafkaName),kafkaBootstrap:this.joinForm.kafkaBootstrap,kafkaVersion:this.joinForm.kafkaVersion,zookeeperBootStrap:this.joinForm.zookeeperBootStrap};Object(c["v"])(t).then(function(t){200==t.data.code?e.$message({showClose:!0,message:"连接成功!\r\n"+t.data.message,type:"success"}):500==t.data.code&&e.$message({showClose:!0,message:"连接失败",type:"error"})})},selectByName:function(){var e=this;this.Treedata=[],Object(c["o"])(this.MenusreachText).then(function(t){if(200==t.status)for(var o=t.data.data,a=0;a<o.length;a++){var n={label:o[a].kafkaName,children:[{label:"生产者",fid:o[a].id},{label:"消费者",fid:o[a].id},{label:"topic",fid:o[a].id}]};e.Treedata.push(n)}})},removeConnect:function(e){var t=this;Object(c["d"])(e.id).then(function(e){200==e.data.code?(t.$message({showClose:!0,message:e.data.message,type:"success"}),t.selectTab="",t.selectID=0,t.selectJoinList()):t.$message({showClose:!0,message:e.data.message,type:"error"})})}},mounted:function(){}},u=l,d=(o("c45e"),o("2877")),p=Object(d["a"])(u,a,n,!1,null,"3db99690",null);t["default"]=p.exports},2767:function(e,t,o){"use strict";var a=o("ec71"),n=o.n(a);n.a},"45b7":function(e,t,o){},"46dc":function(e,t,o){"use strict";var a=o("5511"),n=o.n(a);n.a},5511:function(e,t,o){},6984:function(e,t,o){"use strict";var a=o("005e"),n=o.n(a);n.a},b4b6:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("div",{staticClass:"top"},[o("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:e.openNewdialog}},[e._v("新 增")]),o("div",[o("el-input",{staticClass:"input-with-select",staticStyle:{color:"black"},attrs:{placeholder:"请输入查询内容",size:"small",clearable:""},model:{value:e.selectConsumer,callback:function(t){e.selectConsumer=t},expression:"selectConsumer"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.queryConsumerItem},slot:"append"})],1)],1)],1),o("div",{staticClass:"table-box"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",color:"#909399"},attrs:{data:e.XFtableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),stripe:""}},[o("el-table-column",{attrs:{prop:"consumerName",label:"消费者名",width:"200",align:"center"}}),o("el-table-column",{attrs:{prop:"consumerGroupName",label:"消费者组",width:"200",align:"center"}}),o("el-table-column",{attrs:{prop:"consumerTopic",label:"Topic",width:"200",align:"center"}}),o("el-table-column",{attrs:{prop:"comment",label:"备注",width:"200",align:"center"}}),o("el-table-column",{attrs:{label:"消费/停止",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(o){return e.sendcomsumer(t)}},model:{value:t.row.status,callback:function(o){e.$set(t.row,"status",o)},expression:"scope.row.status"}})],1)]}}])}),o("el-table-column",{attrs:{label:"当前消费",align:"center",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0!=t.row.lag?o("div",[o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"speed:"+t.row.speed+",lag:"+t.row.lag+"logSize:"+t.row.logSize+"offset:"+t.row.offset+"message:"+t.row.msg}},[o("div",{staticClass:"wsText",attrs:{slot:"reference"},slot:"reference"},[e._v("speed: "+e._s(t.row.speed)+",lag: "+e._s(t.row.lag)+",logSize:"+e._s(t.row.logSize)+",offset:"+e._s(t.row.offset)+",message:"+e._s(t.row.msg))])])],1):e._e()]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",plain:""},on:{click:function(o){return e.openSelectdialog(t)}}},[e._v("查看详情")]),o("el-button",{staticStyle:{"margin-left":"30px；padding: 7px 4px"},attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini",plain:""},on:{click:function(o){return e.openUpdatedialog(t)}}},[e._v("修 改")]),o("el-button",{staticStyle:{"margin-left":"15px；padding: 7px 4px"},attrs:{type:"primary",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(o){return e.removeConsumer(t)}}},[e._v("删 除")])],1)]}}])})],1),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{align:"right","current-page":e.currentPage,"page-sizes":[10,30,50],"page-size":e.pageSize,layout:"total,sizes,prev, pager, next,jumper",total:e.XFtableData.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizechange}})],1)],1),o("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog1,width:"30%","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog1=t}}},[o("div",{staticClass:"consumerAdd"},[o("el-form",{ref:"consumerForm",attrs:{model:e.consumerForm,"label-width":"123px",rules:e.rules}},[o("el-form-item",{attrs:{label:"消费者名: ",prop:"consumerName"}},[o("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入消费者名称",disabled:"查看详情"==e.dialogTitle},model:{value:e.consumerForm.consumerName,callback:function(t){e.$set(e.consumerForm,"consumerName",t)},expression:"consumerForm.consumerName"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"消费者组: ",prop:"consumerGroupName"}},[o("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入消费者组",disabled:"查看详情"==e.dialogTitle},model:{value:e.consumerForm.consumerGroupName,callback:function(t){e.$set(e.consumerForm,"consumerGroupName",t)},expression:"consumerForm.consumerGroupName"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"Topic: ",prop:"consumerTopic"}},[o("el-select",{attrs:{placeholder:"请选择Topic",clearable:"",disabled:"查看详情"==e.dialogTitle},model:{value:e.consumerForm.consumerTopic,callback:function(t){e.$set(e.consumerForm,"consumerTopic",t)},expression:"consumerForm.consumerTopic"}},e._l(e.topicList,function(e){return o("el-option",{key:e.id,attrs:{label:e.topicName,value:e.topicName}})}),1)],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"备 注: ",prop:"comment"}},[o("el-input",{staticStyle:{width:"70%"},attrs:{disabled:"查看详情"==e.dialogTitle},model:{value:e.consumerForm.comment,callback:function(t){e.$set(e.consumerForm,"comment",t)},expression:"consumerForm.comment"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"消息消费间隔: ",prop:"consumeInterval"}},[o("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"",size:"mini"},model:{value:e.consumerForm.consumeInterval,callback:function(t){e.$set(e.consumerForm,"consumeInterval",t)},expression:"consumerForm.consumeInterval"}}),o("span",[e._v("ms")]),o("span",{staticStyle:{"font-size":"12px",color:"red","margin-left":"20px"}},[e._v("*注: 支持浮点数(例：0.1ms = 100ns)")])],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"是否自动提交: "}},[o("el-checkbox",{attrs:{"true-label":1,"false-label":0,disabled:"查看详情"==e.dialogTitle},model:{value:e.consumerForm.autoCommit,callback:function(t){e.$set(e.consumerForm,"autoCommit",t)},expression:"consumerForm.autoCommit"}},[e._v("自动提交")])],1),"查看详情"==e.dialogTitle?o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"实际消费情况: "}},[o("span",[e._v("\n            LogSize:\n            "),o("span",[e._v(e._s(e.logSize))])]),o("span",{staticStyle:{"margin-left":"20px"}},[e._v("\n            Offset:\n            "),o("span",[e._v(e._s(e.offset))])]),o("span",{staticStyle:{"margin-left":"20px"}},[e._v("\n            Lag:\n            "),o("span",[e._v(e._s(e.lag))])])]):e._e(),"查看详情"==e.dialogTitle?o("el-form-item",[o("div",{staticClass:"WsBox"},[e._v(e._s(e.consumerText))])]):e._e(),"查看详情"==e.dialogTitle?o("el-form-item",[o("div",{staticClass:"offsetBox"},[o("div",{staticStyle:{"border-bottom":"1px solid #dcdfe6",width:"100%"}},[e._v("Offset调整")]),o("div",{staticStyle:{width:"30%","border-right":"1px solid #dcdfe6",height:"calc(100% - 33px)","line-height":"48px"}},[e._v("指定偏移量")]),o("div",{staticStyle:{width:"38%","border-right":"1px solid #dcdfe6",height:"calc(100% - 33px)","line-height":"48px"}},[o("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:e.consumerForm.offset,callback:function(t){e.$set(e.consumerForm,"offset",t)},expression:"consumerForm.offset"}})],1),o("div",{staticStyle:{width:"30%",height:"calc(100% - 33px)","line-height":"48px"}},[o("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.setConOffset}},[e._v("保 存")])],1)])]):e._e()],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["新建消费者"==e.dialogTitle?o("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.addConsumer("consumerForm")}}},[e._v("保 存")]):e._e(),"修改消费者信息"==e.dialogTitle?o("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){return e.updateSubmit("consumerForm")}}},[e._v("保存修改")]):e._e(),"新建消费者"==e.dialogTitle||"修改消费者信息"==e.dialogTitle?o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){e.dialog1=!1}}},[e._v("取 消")]):e._e()],1)])],1)},n=[],r=(o("ac6a"),o("6b54"),o("e4bc")),s=(o("386d"),o("4917"),o("3b2b"),null),i=null,c=!1,l=null,u=null,d=null,p={},m=function(e,t,o,a){i=e,f(),u=o,d=a,p=t},f=function(){if("undefined"===typeof WebSocket)return w("浏览器不支持WebSocket"),!1;try{s=new WebSocket(i),g()}catch(e){w("连接异常，开始重连"),F()}},g=function(){try{s.onopen=function(e){h(e)},s.onmessage=function(e){b(e)},s.onclose=function(e){w("执行关闭事件"),v(e)},s.onerror=function(e){w("onerr执行err事件，开始重连"),y(e),F()}}catch(e){w("绑定事件未成功，开始重连"),F()}},h=function(e){w("CONNECT"),s.readyState===s.OPEN&&(console.log("发送标识",p),s.send(p)),s.readyState===s.CLOSE&&(w("wsObj.readyState = 3，ws连接异常，开始重连"),F(),d())},b=function(e){console.log(e);var t=e.data;w("onWsmessage接收到服务器的数据:",t),u(t)},v=function(e){w("DISCONNECT"),console.log("onclose event: ",e),e&&1e3!==e.code&&(w("非正常关闭"),d(),F())},y=function(e){w("onError:",e.data),d()},w=function(e){console.log(e)},F=function(){c||(w("3秒后重连"),l&&clearTimeout(l),l=setTimeout(function(){w("重连..."+i),f(),c=!1,w("重连完成")},3e3))},C={data:function(){return{selectConsumer:"",currentPage:1,total:20,pageSize:10,XFtableData:[],dialog1:!1,dialogTitle:"",consumerForm:{id:"",recordConnectionInfoId:"",consumerName:"",consumeInterval:"1000",consumerTopic:"",consumerGroupName:"",comment:"",timeStamp:"",offset:"",autoCommit:1,isUsed:"",status:""},rules:{consumerName:[{required:!0,message:"请输入消费者名称",trigger:"blur"}],consumerTopic:[{required:!0,message:"请选择Topic",trigger:"change"}],consumerGroupName:[{required:!0,message:"请输入消费者组",trigger:"blur"}]},off0setValue:100,topicList:[],consumerText:"",XFidDict:{},offset:"",logSize:"",lag:"",selectIndex:0}},components:{},watch:{selectConsumer:function(e){""==e&&this.queryAllConsumer()},dialog1:function(e){e||(this.resetForm("consumerForm"),this.lag="",this.logSize="",this.offset="")},parent:function(e){this.queryAllproducer(e),this.queryselctTopic(e)},XFtableData:function(e){for(var t=0;t<e.length;t++)e[t].id===this.consumerForm.id&&(this.lag=e[t].lag,this.logSize=e[t].logSize,this.offset=e[t].offset,this.consumerText=e[t].msg)}},created:function(){var e=this;console.log(config.src),this.queryAllConsumer(),this.queryselctTopic(this.parent);var t=+new Date;console.log(t),m("ws://".concat(config.src,"/webSocketConsumer/").concat(t),"HeartBeat",function(t){if(console.log(t),"HeartBeat"!=t&&"true"!=t){console.log(e.XFtableData);var o=JSON.parse(t);if(console.log("消费者成功的回调函数，接收到的数据:",o,Object.prototype.toString.call(t)),"[object Object]"==Object.prototype.toString.call(o)&&o.id){var a=e.XFidDict[o.id],n=e.XFtableData[a];n.msg=o.data.message,n.lag=o.data.lag,n.logSize=o.data.logSize,n.offset=o.data.offset,n.speed=o.data.speed,e.$set(e.XFtableData,a,n)}}e.WSvalue=o},function(){console.log("失败的回调")})},methods:{handleSizechange:function(e){this.currentPage=1,this.pageSize=e},resetForm:function(e){this.$refs[e].resetFields()},handleCurrentChange:function(e){this.currentPage=e},queryAllConsumer:function(){var e=this;console.log(this.parent),Object(r["l"])(this.parent).then(function(t){200==t.data.code?(e.XFtableData=t.data.data,e.XFtableData.forEach(function(t,o){e.XFidDict[t.id]=o})):e.$message({showClose:!0,message:t.data.message,type:"error"})})},queryConsumerItem:function(){var e=this;Object(r["p"])(this.parent,this.selectConsumer).then(function(t){200==t.data.code?e.XFtableData=t.data.data:e.$message({showClose:!0,message:t.data.message,type:"error"})})},queryselctTopic:function(e){var t=this;Object(r["n"])(e).then(function(e){200==e.data.code?t.topicList=e.data.data:t.$message({showClose:!0,message:e.data.message,type:"error"})})},openNewdialog:function(){this.dialog1=!0,this.dialogTitle="新建消费者"},addConsumer:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var o={recordConnectionInfoId:t.parent,consumerName:t.consumerForm.consumerName,consumerTopic:t.consumerForm.consumerTopic,consumerGroupName:t.consumerForm.consumerGroupName,comment:t.consumerForm.comment,timeStamp:null,offset:0,autoCommit:1,isUsed:0,status:0};Object(r["h"])(o).then(function(e){200==e.data.code?(t.dialog1=!1,t.$message({showClose:!0,message:"新建成功",type:"success"}),t.queryAllConsumer()):t.$message({showClose:!0,message:e.data.message,type:"error"})})}})},openSelectdialog:function(e){var t=this;this.dialog1=!0,this.dialogTitle="查看详情",e.row.hasOwnProperty("lag")||Object(r["q"])(e.row.id).then(function(e){200==e.data.code?(t.offset=e.data.data.offset,t.lag=e.data.data.lag,t.logSize=e.data.data.logsize):t.$message({showClose:!0,message:e.data.message,type:"error"})}),this.$nextTick(function(){t.consumerForm.consumerName=e.row.consumerName,t.consumerForm.consumerTopic=e.row.consumerTopic,t.consumerForm.consumerGroupName=e.row.consumerGroupName,t.consumerForm.comment=e.row.comment,t.consumerForm.consumeInterval=e.row.consumeInterval,t.consumerForm.autoCommit=e.row.autoCommit,t.consumerForm.offset=e.row.offset,t.consumerForm.id=e.row.id})},openUpdatedialog:function(e){var t=this;this.dialog1=!0,this.dialogTitle="修改消费者信息",console.log(e),this.$nextTick(function(){t.consumerForm.consumerName=e.row.consumerName,t.consumerForm.consumerTopic=e.row.consumerTopic,t.consumerForm.consumerGroupName=e.row.consumerGroupName,t.consumerForm.comment=e.row.comment,t.consumerForm.consumeInterval=e.row.consumeInterval,t.consumerForm.autoCommit=e.row.autoCommit,t.consumerForm.id=e.row.id})},updateSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var o={id:t.consumerForm.id,consumerName:t.consumerForm.consumerName,consumerTopic:t.consumerForm.consumerTopic,consumerGroupName:t.consumerForm.consumerGroupName,comment:t.consumerForm.comment,recordConnectionInfoId:t.parent,timeStamp:null,consumeInterval:t.consumerForm.consumeInterval,offset:t.consumerForm.offset,autoCommit:t.consumerForm.autoCommit,isUsed:0,status:0};Object(r["w"])(o).then(function(e){200==e.data.code?(t.dialog1=!1,t.$message({showClose:!0,message:"修改成功",type:"success"}),t.queryAllConsumer()):t.$message({showClose:!0,message:e.data.message,type:"error"})})}})},removeConsumer:function(e){var t=this;Object(r["e"])(e.row.id).then(function(e){200==e.data.code?(t.$message({showClose:!0,message:"删除成功",type:"success"}),t.queryAllConsumer()):t.$message({showClose:!0,message:e.data.message,type:"error"})})},sendcomsumer:function(e){var t=this;Object(r["a"])(e.row.id,e.row.status).then(function(e){200==e.data.code?(t.$message({showClose:!0,message:e.data.message,type:"success"}),t.queryAllConsumer()):t.$message({showClose:!0,message:e.data.message,type:"warning"})})},setConOffset:function(){var e=this;Object(r["u"])(this.consumerForm.id,this.consumerForm.offset).then(function(t){200==t.data.code?(e.$message({showClose:!0,message:t.data.message,type:"success"}),e.queryAllConsumer()):e.$message({showClose:!0,message:t.data.message,type:"warning"})})}},mounted:function(){},props:{parent:{type:String,required:!1}}},k=C,T=(o("46dc"),o("2877")),S=Object(T["a"])(k,a,n,!1,null,"332b2254",null);t["default"]=S.exports},c45e:function(e,t,o){"use strict";var a=o("45b7"),n=o.n(a);n.a},d88b:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("div",{staticClass:"top"},[o("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:e.opendialog}},[e._v("新 增")]),o("div",[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入查询内容",size:"small",clearable:""},model:{value:e.procer,callback:function(t){e.procer=t},expression:"procer"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.selectByproducerName},slot:"append"})],1)],1)],1),o("div",{staticClass:"table-box"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",color:"#909399"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),stripe:""}},[o("el-table-column",{attrs:{prop:"producerName",label:"生产者名",width:"240",align:"center"}}),o("el-table-column",{attrs:{prop:"producerTopic",label:"Topic",width:"220",align:"center"}}),o("el-table-column",{attrs:{prop:"comment",label:"备注",align:"center",width:"200"}}),o("el-table-column",{attrs:{label:"发送/终止",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(o){return e.sendproducer(t)}},model:{value:t.row.status,callback:function(o){e.$set(t.row,"status",o)},expression:"scope.row.status"}})],1)]}}])}),o("el-table-column",{attrs:{label:"当前推送",align:"center",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0!=t.row.msg?o("div",[o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:"speed:"+t.row.speed+",curRow: "+t.row.curRow+",msg: "+t.row.msg}},[o("div",{staticClass:"wsText",attrs:{slot:"reference"},slot:"reference"},[e._v("speed:"+e._s(t.row.speed)+",curRow: "+e._s(t.row.curRow)+",msg:"+e._s(t.row.msg))])])],1):e._e()]}}])}),o("el-table-column",{attrs:{label:"重新发送",align:"center",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",plain:""},on:{click:function(o){return e.sendproducer2(t)}}},[e._v("重新发送")])],1)]}}])}),o("el-table-column",{attrs:{label:"修改/删除",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{"margin-left":"30px；padding: 7px 4px"},attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini",plain:""},on:{click:function(o){return e.updateProducer(t)}}},[e._v("修 改")]),o("el-button",{staticStyle:{"margin-left":"15px；padding: 7px 4px"},attrs:{type:"primary",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(o){return e.removeproducer(t.row.id)}}},[e._v("删 除")])],1)]}}])})],1),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{align:"right","current-page":e.currentPage,"page-sizes":[10,30,50],"page-size":e.pageSize,layout:"total,sizes,prev, pager, next,jumper",total:e.tableData.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizechange}})],1)],1),o("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog1,width:"30%","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog1=t}}},[o("div",{staticClass:"productAdd"},[o("el-form",{ref:"productFrom",attrs:{model:e.productFrom,"label-width":"123px",rules:e.rules}},[o("el-form-item",{attrs:{label:"生产者名: ",prop:"producerName"}},[o("el-input",{staticStyle:{width:"70%"},model:{value:e.productFrom.producerName,callback:function(t){e.$set(e.productFrom,"producerName",t)},expression:"productFrom.producerName"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"Topic: ",prop:"producerTopic"}},[o("el-select",{attrs:{placeholder:"请选择Topic",clearable:""},model:{value:e.productFrom.producerTopic,callback:function(t){e.$set(e.productFrom,"producerTopic",t)},expression:"productFrom.producerTopic"}},e._l(e.topicList,function(e){return o("el-option",{key:e.id,attrs:{label:e.topicName,value:e.topicName}})}),1)],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"备注: ",prop:"remarks"}},[o("el-input",{staticStyle:{width:"70%"},model:{value:e.productFrom.remarks,callback:function(t){e.$set(e.productFrom,"remarks",t)},expression:"productFrom.remarks"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"文件: ",prop:"productFile"}},[o("input",{ref:"clearFile",attrs:{type:"file",accept:".txt",multiple:""},on:{change:function(t){return e.handleChange(t)}}})]),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"文件内容: ",prop:"fileText"}},[o("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",rows:4},model:{value:e.productFrom.fileText,callback:function(t){e.$set(e.productFrom,"fileText",t)},expression:"productFrom.fileText"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"文件类型: ",prop:"fileType"}},[o("el-radio-group",{attrs:{size:"mini"},model:{value:e.productFrom.fileType,callback:function(t){e.$set(e.productFrom,"fileType",t)},expression:"productFrom.fileType"}},[o("el-radio-button",{attrs:{label:"TXT"}}),o("el-radio-button",{attrs:{label:"JSON"}}),o("el-radio-button",{attrs:{label:"HEX"}}),o("el-radio-button",{attrs:{label:"DEC"}}),o("el-radio-button",{attrs:{label:"BIN"}})],1)],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:""}},[o("el-checkbox",{model:{value:e.productFrom.isCycleSend,callback:function(t){e.$set(e.productFrom,"isCycleSend",t)},expression:"productFrom.isCycleSend"}},[e._v("循环发送")]),o("el-checkbox",{model:{value:e.productFrom.isRandomAppend,callback:function(t){e.$set(e.productFrom,"isRandomAppend",t)},expression:"productFrom.isRandomAppend"}},[e._v("末尾拼接随机参数")])],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"消息发送间隔: ",prop:"pTime"}},[o("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"",size:"mini"},model:{value:e.productFrom.pTime,callback:function(t){e.$set(e.productFrom,"pTime",t)},expression:"productFrom.pTime"}}),o("span",[e._v("ms")]),o("span",{staticStyle:{"font-size":"12px",color:"red","margin-left":"20px"}},[e._v("*注: 支持浮点数(例：0.1ms = 100ns)")])],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["新建生产者信息"==e.dialogTitle?o("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.saveproducer("productFrom")}}},[e._v("保 存")]):o("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(t){return e.updateSubmit("productFrom")}}},[e._v("保存修改")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.exitFun("productFrom")}}},[e._v("取 消")])],1)])],1)},n=[],r=(o("c5f6"),o("ac6a"),o("55dd"),o("7f7f"),o("6b54"),o("e4bc")),s=(o("386d"),o("4917"),o("3b2b"),null),i=null,c=!1,l=null,u=null,d=null,p={},m=function(e,t,o,a){i=e,f(),u=o,d=a,p=t},f=function(){if("undefined"===typeof WebSocket)return w("浏览器不支持WebSocket"),!1;try{s=new WebSocket(i),g()}catch(e){w("连接异常，开始重连"),F()}},g=function(){try{s.onopen=function(e){h(e)},s.onmessage=function(e){b(e)},s.onclose=function(e){w("执行关闭事件"),v(e)},s.onerror=function(e){w("onerr执行err事件，开始重连"),y(e),F()}}catch(e){w("绑定事件未成功，开始重连"),F()}},h=function(e){w("CONNECT"),s.readyState===s.OPEN&&(console.log("发送标识",p),s.send(p)),s.readyState===s.CLOSE&&(w("wsObj.readyState = 3，ws连接异常，开始重连"),F(),d())},b=function(e){console.log(e);var t=e.data;w("onWsmessage接收到服务器的数据:",t),u(t)},v=function(e){w("DISCONNECT"),console.log("onclose event: ",e),e&&1e3!==e.code&&(w("非正常关闭"),d(),F())},y=function(e){w("onError:",e.data),d()},w=function(e){console.log(e)},F=function(){c||(w("3秒后重连"),l&&clearTimeout(l),l=setTimeout(function(){w("重连..."+i),f(),c=!1,w("重连完成")},3e3))},C={data:function(){return{tableData:[],procer:"",CycleSend:1,dialog1:!1,producID:"",topicList:[],loadplay:!1,loading:!1,wsocket:null,dialogTitle:"",WSvalue:{},productFrom:{producerName:"",producerTopic:"",remarks:"",productFile:"",fileText:"",fileType:"TXT",isCycleSend:!1,isRandomAppend:!1,pTime:"1000"},rules:{producerName:[{required:!0,message:"请输入生产者名称",trigger:"blur"}],producerTopic:[{required:!0,message:"请选择Topic",trigger:"change"}],fileText:[{required:!0,message:"请选择文件",trigger:"blur"}],fileType:[{required:!0,message:"请选择文件格式",trigger:"change"}]},currentPage:1,total:20,pageSize:10,selectIndex:0,idDict:{}}},components:{},watch:{dialog1:function(e){e||(this.resetForm("productFrom"),this.clearFile())},parent:function(e){this.queryAllproducer(e),this.queryselctTopic(e)},procer:function(e){""==e&&this.queryAllproducer(this.parent)},CycleSend:function(e){console.log(e)}},created:function(){var e=this;this.queryAllproducer(this.parent),this.queryselctTopic(this.parent);var t=+new Date;console.log(t),m("ws://".concat(config.src,"/webSocketProducer/").concat(t),"HeartBeat",function(t){if("HeartBeat"!=t&&"true"!=t){var o=JSON.parse(t);if(console.log("成功的回调函数，接收到的数据:",o,Object.prototype.toString.call(t)),"[object Object]"==Object.prototype.toString.call(o)&&o.id){var a=e.idDict[o.id],n=e.tableData[a];n.msg=o.data.message,n.curRow=o.data.curRow,n.speed=o.data.speed,e.$set(e.tableData,a,n)}}},function(){console.log("失败的回调")})},destroyed:function(){},methods:{handleChange:function(e){for(var t=this,o=e.target.files,a=[],n=0;n<o.length;n++){var r=new FileReader;console.log(o[n]),r.readAsText(o[n],"utf-8"),r.onload=function(e){console.log(e),t.productFrom.fileText=t.productFrom.fileText+e.target.result},a.push(o[n].name)}console.log(a.sort())},clearFile:function(){this.$refs.clearFile.value=""},resetForm:function(e){this.$refs[e].resetFields()},exitFun:function(e){this.resetForm(e),this.dialog1=!1},queryAllproducer:function(e){var t=this;Object(r["m"])(e).then(function(e){200==e.data.code?(t.tableData=e.data.data,t.tableData.forEach(function(e,o){t.idDict[e.id]=o})):t.$message({type:"warning",message:"请求失败"})})},handleSizechange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},queryselctTopic:function(e){var t=this;Object(r["n"])(e).then(function(e){200==e.data.code?t.topicList=e.data.data:t.$message({showClose:!0,message:e.data.message,type:"success"})})},saveproducer:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var o={recordConnectionInfoId:t.parent,producerName:t.productFrom.producerName,producerTopic:t.productFrom.producerTopic,comment:t.productFrom.remarks,lastContent:t.productFrom.fileText,contentType:encodeURIComponent(t.productFrom.fileType),isCycleSend:Number(t.productFrom.isCycleSend),isRandomAppend:Number(t.productFrom.isRandomAppend),sendInterval:t.productFrom.pTime};Object(r["i"])(o).then(function(e){200==e.data.code?(t.resetForm("productFrom"),t.dialog1=!1,t.$message({showClose:!0,message:"添加成功",type:"success"}),t.queryAllproducer(t.parent)):t.$message({showClose:!0,message:e.data.message,type:"warning"})})}})},selectByproducerName:function(){var e=this;Object(r["s"])(this.procer,this.parent).then(function(t){200==t.data.code?e.tableData=t.data.data:e.$message({showClose:!0,message:t.data.message,type:"warning"})})},sendproducer:function(e){var t=this;Object(r["j"])(e.row.status,e.row.id).then(function(e){200==e.data.code?t.$message({showClose:!0,message:e.data.message,type:"success"}):t.$message({showClose:!0,message:e.data.message,type:"warning"})})},sendproducer2:function(e){var t=this;Object(r["j"])(2,e.row.id).then(function(e){200==e.data.code?(t.queryAllproducer(t.parent),t.$message({showClose:!0,message:e.data.message,type:"success"})):t.$message({showClose:!0,message:e.data.message,type:"warning"})})},opendialog:function(){this.dialogTitle="新建生产者信息",this.dialog1=!0},updateProducer:function(e){var t=this;this.dialogTitle="修改生产者信息",this.dialog1=!0,this.$nextTick(function(){t.productFrom.producerName=e.row.producerName,t.productFrom.producerTopic=e.row.producerTopic,t.productFrom.remarks=e.row.comment,t.productFrom.fileText=e.row.lastContent,t.productFrom.fileType=e.row.contentType,t.productFrom.isCycleSend=!!e.row.isCycleSend,t.productFrom.isRandomAppend=!!e.row.isRandomAppend,t.productFrom.pTime=e.row.sendInterval,t.selectIndex=e.row.id})},updateSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var o={recordConnectionInfoId:t.parent,producerName:t.productFrom.producerName,producerTopic:t.productFrom.producerTopic,comment:t.productFrom.remarks,lastContent:t.productFrom.fileText,contentType:encodeURIComponent(t.productFrom.fileType),isCycleSend:Number(t.productFrom.isCycleSend),isRandomAppend:Number(t.productFrom.isRandomAppend),sendInterval:t.productFrom.pTime,id:t.selectIndex,isUsed:0};Object(r["x"])(o).then(function(e){200==e.data.code?(t.resetForm("productFrom"),t.dialog1=!1,t.$message({showClose:!0,message:"修改成功",type:"success"}),t.queryAllproducer(t.parent)):t.$message({showClose:!0,message:e.data.message,type:"warning"})})}})},removeproducer:function(e){var t=this;Object(r["f"])(e).then(function(e){200==e.data.code?(t.$message({showClose:!0,message:"删除成功",type:"success"}),t.queryAllproducer(t.parent)):t.$message({showClose:!0,message:e.data.message,type:"warning"})})},wsInit:function(){var e="ws://10.5.21.139:8081/webSocket/1";this.wsocket=new WebSocket(e),this.wsocket.onmessage=this.wsonMessage,this.wsocket.onopen=this.wsonOpen,this.wsocket.onerror=this.wsonError,this.wsocket.onclose=this.wsclose},wsonOpen:function(){console.log("连接成功")},wsonError:function(){this.wsInit()},wsonMessage:function(e){console.log(e)},wsSend:function(e){this.wsocket.send(e)},wsclose:function(e){console.log("断开连接",e)}},mounted:function(){},props:{parent:{type:String,required:!1}}},k=C,T=(o("2767"),o("2877")),S=Object(T["a"])(k,a,n,!1,null,"6813da7f",null);t["default"]=S.exports},e24a:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("div",{staticClass:"top"},[o("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:function(t){e.dialog1=!0}}},[e._v("新 增")]),o("div",[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入查询内容",size:"small",clearable:""},model:{value:e.Selecttopic,callback:function(t){e.Selecttopic=t},expression:"Selecttopic"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.selectByTopic},slot:"append"})],1)],1)],1),o("div",{staticClass:"table-box"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",color:"#909399"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"TopicID",width:"240",align:"center"}}),o("el-table-column",{attrs:{prop:"topicName",label:"Topic名",width:"240",align:"center"}}),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{staticStyle:{"margin-left":"15px；padding: 7px 4px"},attrs:{type:"info",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(o){return e.openTopicList(t)}}},[e._v("查看数据")]),o("el-button",{staticStyle:{"margin-left":"15px；padding: 7px 4px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(o){return e.removeTopic(t.row.id)}}},[e._v("删 除")])],1)]}}])})],1),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{align:"right","current-page":e.currentPage,"page-sizes":[10,30,50],"page-size":e.pageSize,layout:"total,sizes,prev, pager, next,jumper",total:e.tableData.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizechange}})],1)],1),o("el-dialog",{attrs:{title:"",visible:e.topicInfo,width:"30%","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.topicInfo=t}}},[o("div",{staticClass:"topicInfo"},[o("el-input",{staticClass:"input-with-select",staticStyle:{width:"70%"},attrs:{placeholder:"请输入查询内容",size:"small",clearable:""},model:{value:e.topicNum,callback:function(t){e.topicNum=t},expression:"topicNum"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.selectTopicInfo},slot:"append"})],1),o("br"),o("span",[e._v("*注: 默认查询100条数据，可自行输入")]),o("div",{staticClass:"topicMessage"},[e._v(e._s(e.topicValue))])],1)]),o("el-dialog",{attrs:{title:"新建Topic",visible:e.dialog1,width:"30%","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog1=t}}},[o("div",{staticClass:"topicAdd"},[o("el-form",{ref:"topicForm",attrs:{model:e.topicForm,"label-width":"123px",rules:e.rules}},[o("el-form-item",{attrs:{label:"Topic名称: ",prop:"topicName"}},[o("el-input",{staticStyle:{width:"72%"},model:{value:e.topicForm.topicName,callback:function(t){e.$set(e.topicForm,"topicName",t)},expression:"topicForm.topicName"}})],1),o("el-form-item",{attrs:{label:"Partition数量: ",prop:"partitions"}},[o("el-input",{staticStyle:{width:"72%"},model:{value:e.topicForm.partitions,callback:function(t){e.$set(e.topicForm,"partitions",t)},expression:"topicForm.partitions"}})],1),o("el-form-item",{attrs:{label:"副本数量: ",prop:"replicas"}},[o("el-input",{staticStyle:{width:"72%"},model:{value:e.topicForm.replicas,callback:function(t){e.$set(e.topicForm,"replicas",t)},expression:"topicForm.replicas"}})],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){return e.newTopic("topicForm")}}},[e._v("创 建")]),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){return e.resetForm("topicForm")}}},[e._v("取 消")])],1)])],1)},n=[],r=o("e4bc"),s={data:function(){return{tableData:[],loading:!1,currentPage:1,total:20,pageSize:10,dialog1:!1,Selecttopic:"",topicInfo:!1,topicValue:"",topicNum:100,selectTopicId:0,topicForm:{topicName:"",partitions:"",replicas:""},rules:{topicName:[{required:!0,message:"请输Topic名称",trigger:"blur"}],partitions:[{required:!0,message:"请输入Partition数量",trigger:"blur"}],replicas:[{required:!0,message:"请输入副本数量",trigger:"blur"}]}}},watch:{parent:function(e){this.queryAllTopic(e)},dialog1:function(e){e||this.resetForm("topicForm")},topicInfo:function(e){e||(this.topicValue="",this.topicNum=100)},Selecttopic:function(e){""==e&&this.queryAllTopic(this.parent)}},components:{},created:function(){this.queryAllTopic(this.parent)},methods:{handleSizechange:function(e){this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},resetForm:function(e){this.dialog1=!1,this.$refs[e].resetFields()},queryAllTopic:function(e){var t=this;Object(r["n"])(e).then(function(e){200==e.data.code?t.tableData=e.data.data:t.$message({showClose:!0,message:e.data.message,type:"warning"})})},newTopic:function(e){var t=this;this.$refs[e].validate(function(o){if(o){var a={recordConnectionInfoId:t.parent,topicName:t.topicForm.topicName,partitions:t.topicForm.partitions,replicas:t.topicForm.replicas};Object(r["c"])(a).then(function(o){200==o.data.code?(t.resetForm(e),t.queryAllTopic(t.parent),t.$message({showClose:!0,message:"新建成功",type:"success"})):t.$message({showClose:!0,message:o.data.message,type:"warning"})})}})},selectByTopic:function(){var e=this;Object(r["t"])(this.parent,this.Selecttopic).then(function(t){200==t.data.code?e.tableData=t.data.data:e.$message({showClose:!0,message:t.data.message,type:"warning"})})},removeTopic:function(e){var t=this;Object(r["g"])(e).then(function(e){200==e.data.code?t.queryAllTopic(t.parent):t.$message({showClose:!0,message:e.data.message,type:"warning"})})},openTopicList:function(e){this.selectTopicId=e.row.id,this.topicInfo=!0},selectTopicInfo:function(){var e=this;Object(r["r"])(this.selectTopicId,this.topicNum).then(function(t){if(200==t.data.code){var o=t.data.data;if(0==o.length)e.topicValue="暂无数据";else for(var a=0;a<o.length;a++){var n="       ",r="partition: "+o[a].partition+n+"offset: "+o[a].offset+n+"message: "+o[a].message+"\r\n";e.topicValue=e.topicValue+r}}else e.$message({showClose:!0,message:t.data.message,type:"error"})})}},mounted:function(){},props:{parent:{type:String,required:!1}}},i=s,c=(o("6984"),o("2877")),l=Object(c["a"])(i,a,n,!1,null,"319599ec",null);t["default"]=l.exports},e4bc:function(e,t,o){"use strict";o.d(t,"k",function(){return n}),o.d(t,"m",function(){return r}),o.d(t,"b",function(){return s}),o.d(t,"v",function(){return i}),o.d(t,"o",function(){return c}),o.d(t,"i",function(){return l}),o.d(t,"n",function(){return u}),o.d(t,"s",function(){return d}),o.d(t,"j",function(){return p}),o.d(t,"x",function(){return m}),o.d(t,"f",function(){return f}),o.d(t,"c",function(){return g}),o.d(t,"t",function(){return h}),o.d(t,"g",function(){return b}),o.d(t,"d",function(){return v}),o.d(t,"r",function(){return y}),o.d(t,"l",function(){return w}),o.d(t,"p",function(){return F}),o.d(t,"h",function(){return C}),o.d(t,"w",function(){return k}),o.d(t,"e",function(){return T}),o.d(t,"a",function(){return S}),o.d(t,"u",function(){return x}),o.d(t,"q",function(){return N});var a=o("b5c6"),n=function(){return Object(a["a"])({url:"/connection/selectAllConnection",method:"post"})},r=function(e){return Object(a["a"])({url:"/producer/selectAllProducer",method:"post",headers:{recordConnectionInfoId:e}})},s=function(e){return Object(a["a"])({url:"/connection/addConnection",method:"post",data:e})},i=function(e){return Object(a["a"])({url:"/connection/testConnection",method:"post",headers:e})},c=function(e){return Object(a["a"])({url:"/connection/selectConnectionByKafkaName",method:"post",data:{fuzzyString:e}})},l=function(e){return Object(a["a"])({url:"/producer/newProducer",method:"post",data:e})},u=function(e){return Object(a["a"])({url:"/topic/selectAllTopic",method:"post",headers:{recordConnectionInfoId:e}})},d=function(e,t){return Object(a["a"])({url:"/producer/selectProducerByNameAndConnectionId",method:"post",data:{recordConnectionInfoId:t,fuzzyString:e}})},p=function(e,t){return Object(a["a"])({url:"/producer/producerSend",method:"post",headers:{producerId:t,sendAndStopFlag:e}})},m=function(e){return Object(a["a"])({url:"/producer/updateProducerById",method:"post",data:e})},f=function(e){return Object(a["a"])({url:"/producer/deleteProducerById",method:"post",headers:{id:e}})},g=function(e){return Object(a["a"])({url:"/topic/addTopic",method:"post",headers:e})},h=function(e,t){return Object(a["a"])({url:"/topic/selectTopicByNameAndConnectionId",method:"post",headers:{recordConnectionInfoId:e,fuzzyString:t}})},b=function(e){return Object(a["a"])({url:"/topic/deleteTopicById",method:"post",headers:{id:e}})},v=function(e){return Object(a["a"])({url:"/connection/deleteConnectionById",method:"post",headers:{id:e}})},y=function(e,t){return Object(a["a"])({url:"/topic/selectLatestTopicData",method:"post",headers:{id:e,num:t}})},w=function(e){return Object(a["a"])({url:"/consumer/selectAllConsumer",method:"post",headers:{recordConnectionInfoId:e}})},F=function(e,t){return Object(a["a"])({url:"/consumer/selectConsumerByNameAndConnectionId",method:"post",data:{fuzzyString:t,recordConnectionInfoId:e}})},C=function(e){return Object(a["a"])({url:"/consumer/newConsumer",method:"post",data:e})},k=function(e){return Object(a["a"])({url:"/consumer/updateConsumerById",method:"post",data:e})},T=function(e){return Object(a["a"])({url:"/consumer/deleteConsumerById",method:"post",headers:{id:e}})},S=function(e,t){return Object(a["a"])({url:"/consumer/consumerConsume",method:"post",headers:{consumerId:e,receiveAndStopFlag:t}})},x=function(e,t){return Object(a["a"])({url:"/consumer/setConsumerOffset",method:"post",headers:{consumerId:e,offset:t}})},N=function(e){return Object(a["a"])({url:"/consumer/selectOffsetLogSizeLag",method:"post",headers:{consumerId:e}})}},ec71:function(e,t,o){}}]);